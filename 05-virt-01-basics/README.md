# Домашнее задание к занятию "5.1. Основы виртуализации"

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

### Решение
#### Программная виртуализация (VMWare Workstation, KVM, VirtualBox, Hyper-V service)
Данный тип виртуализация является самым старым из рассматриваемых. Требует наличия хостовой операционной системы.\
При создании виртуальных машин в данной виртуализации происходит незначительное изменение ядра гостевой операционной системы для работы с гипервизором.\
Виртуальные машины имеют свой набор виртуальных устройств и являются изолированными друг от друга.

#### Аппаратная виртуализация (VMWare vSphere/ESX, Hyper-V)
Для виртуализации задействуются инструкции центрального процессора, вида Intel VT/VT-x.
Возможна работа без хостовой операционной системы с использованием легковесного гипервизора. \
Гостевые операционные системы работают с аппаратными ресурсами сервера на прямую, по сравнению с программной виртулизацией.\
Переключение между платформами виртуализации на аппаратном уровне.\
Виртуальные машины имеют свой набор виртуальных устройств и являются изолированными друг от друга.

**Контейнерная виртуализация (docker, lxc, openvz)**\

Виртуализация на базе операционной системы, которая позволяет запускать изолированные виртуальные системы.\
Контейнеры не имеют своего ядра, а используют ядро хостовой операцинной системы.\
Не имеют свой набор устройств, а монтируют устройства с хостовой операционной системы.\
Контейнерные виртуальные машины за счет этого более легковесные и быстрее инициализируются. Имеют более гибкое развертывание через IaaC.

## Задача 2
Выберите тип один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера
- паравиртуализация
- виртуализация уровня ОС

Условия использования:

- Высоконагруженная база данных, чувствительная к отказу
- Различные web-приложения
- Windows системы для использования Бухгалтерским отделом 
- Системы, выполняющие высокопроизводительные расчеты на GPU

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

### Решение

Физические сервера я бы использовал для высокопроизводительных расчётов на GPU для прямого доступа к аппаратным ресурсам сервера, т.к здесь критична производительность.\
Физические сервера так же я бы использовал для высоконагруженной базы данных из-за прямого доступа к аппаратным ресурсам сервера. Здесь желательна аппаратная виртуализация с отказоустойчивым кластером.\
Паравиртуализацию использовал бы для Windows-систем для использования бухгалтерским отделом, т.к в основном это клиентские виртуальные машины для работы с офисом и 1С, не требующие большой производительности.\
Виртуализацию уровня ОС я бы использовал для web-приложений, для более быстрого развертывания виртуальных машин через IaaC, с предустановленным набором софта/библиотек.

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.


### Решение

1. Под данные задачи подходит Hyper-V. Он имеет балансировать нагрузку, реплицировать виртуальные машины между гипервизорами. Бекапы автоматически можно создавать через Windows Server Backup.
2. Для таких целей подходит XEN. Наиболее производительное бесплатное opensource решение. Поддерживает Intel VT/VT-x для прямого доступа к аппаратным ресурсам сервера.
3. Здесь можно использовать бесплатный ESXi с учетом ограничений. Если ограничения не позволяет полноценно развернуть нужное количество виртуальных машин, то я бы использовал XEN/KVM.
4. Для тестирования продукта лучше всего подходит контейнерная виртуализация. За счет скорости создания и использования IaaC. Можно быстро развернуть нужные дистрибутивы с нужными версиями софта/библиотек.

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

### Решение
